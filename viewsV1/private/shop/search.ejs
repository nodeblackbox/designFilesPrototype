<!DOCTYPE html>
<html>
<head>
    <title>Search <%=shopName%></title>
    <link rel="stylesheet" type="text/css" href="/main.css" />
</head>
<body>
<h1>Search <%=shopName%></h1>

<form action="/search-result" method="GET">
    <label>Keyword:</label>
    <input
        id="search-box"
        type="text"
        name="keyword"
        placeholder="Enter book title"
        pattern="[\w\s]*"
        title="Only letters, numbers, and underscores are allowed."
    />

    <label>Order by:</label>
    <select name="orderBy">
        <option value="title">Title</option>
    </select>

    <label>Sort:</label>
    <select name="sort">
        <option value="asc">Ascending</option>
        <option value="desc">Descending</option>
    </select>

    <input type="submit" value="Search" />
</form>

<% if (message && message.length) { %>
    <p><%= message %></p>
<% } else if (availableBooks && availableBooks.length) { %>
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Description</th>
                <th>Publication Date</th>
                <th>Price</th>
                <th>Publisher</th>
            </tr>
        </thead>
        <tbody>
            <% availableBooks.forEach(book => { %>
                <tr>
                    <td><%= book.title %></td>
                    <td><%= book.description %></td>
                    <td><%= book.publication_date %></td>
                    <td><%= book.price %></td>
                    <td><%= book.publisher_name %></td>
                </tr>
            <% }); %>
        </tbody>
    </table>
<% } %>

</body>
</html>
